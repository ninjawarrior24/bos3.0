document.addEventListener("DOMContentLoaded",function(){const e=(new Date).getFullYear(),t=document.getElementById("year");t&&(t.textContent=e);const r=document.getElementById("hamburgerBtn"),n=document.getElementById("hamburgerMenu");r&&n&&r.addEventListener("click",()=>{r.classList.toggle("active"),n.classList.toggle("active")});const a=document.querySelector(".the-nos");if(a){const e=a.querySelectorAll(".nos-layer");new IntersectionObserver((t,r)=>{t.forEach(t=>{t.isIntersecting&&(e.forEach(e=>e.classList.add("is-visible")),r.unobserve(t.target))})},{threshold:.2}).observe(a)}class i{constructor(e){this.root=e,this.track=e.querySelector(".carousel-track"),this.items=Array.from(e.querySelectorAll(".carousel-item")),this.n=this.items.length,0!==this.n&&(this.idx=0,this.auto="true"===e.dataset.autoplay,this.interval=parseInt(e.dataset.interval||4e3,10),this.timer=null,this._buildDots(),this._measureAndLayout(),this._bindEvents(),this.goTo(0,!1),setTimeout(()=>{this._measureAndLayout(),this.goTo(this.idx,!1)},120),this.auto&&this.start())}_buildDots(){if(this.dotsWrap=this.root.querySelector(".carousel-dots"),this.dotsWrap){this.dotsWrap.innerHTML="";for(let e=0;e<this.n;e++){const t=document.createElement("button");t.addEventListener("click",()=>this.goTo(e)),0===e&&t.classList.add("active"),this.dotsWrap.appendChild(t)}}}_measureAndLayout(){const e=this.root.offsetWidth||(this.track.parentElement?this.track.parentElement.offsetWidth:1e3);this.itemW=Math.round(Math.min(.6*e,1e3)),this.itemH=this.items[0]&&this.items[0].offsetHeight||Math.round(.56*this.itemW),this.root.style.perspective=this.root.style.perspective||"1200px",this.track.style.transformStyle="preserve-3d",this.track.style.position="relative",this.track.style.height=this.itemH+"px",this.spacingX=Math.round(.5*this.itemW),this.frontZ=160,this.stepZ=90,this.items.forEach((e,t)=>{e.style.position="absolute",e.style.left="50%",e.style.top="50%",e.style.width=Math.round(this.itemW)+"px",e.style.height=this.itemH+"px",e.style.transformOrigin="50% 50%",e.style.transition="transform 520ms cubic-bezier(.2,.9,.2,1), opacity 320ms"}),this.track.style.transition="transform 520ms cubic-bezier(.2,.9,.2,1)"}_bindEvents(){const e=this.root.querySelector(".carousel-prev"),t=this.root.querySelector(".carousel-next");e&&e.addEventListener("click",()=>this.prev()),t&&t.addEventListener("click",()=>this.next());let r=0,n=0,a=!1;this.track.addEventListener("pointerdown",e=>{a=!0,r=e.clientX,this.stop(),this.track.setPointerCapture&&this.track.setPointerCapture(e.pointerId)}),this.track.addEventListener("pointermove",e=>{a&&(n=e.clientX-r)}),this.track.addEventListener("pointerup",()=>{a=!1,Math.abs(n)>40&&(n<0?this.next():this.prev()),n=0,this.start()}),this.track.addEventListener("pointercancel",()=>{a=!1,n=0,this.start()}),window.addEventListener("resize",()=>{this._measureAndLayout(),this.goTo(this.idx,!1)})}goTo(e,t=!0){this.idx=(e%this.n+this.n)%this.n;for(let e=0;e<this.n;e++){const t=this.n;let r=e-this.idx;for(;r>t/2;)r-=t;for(;r<-t/2;)r+=t;const n=r,a=Math.abs(n);let i=0;i=0===a?0:1===a?Math.sign(n)*(.5*this.itemW+0):Math.sign(n)*(.5*this.itemW+(a-1)*(this.spacingX+20));const o=0===a?this.frontZ:-Math.min(a*this.stepZ,600),s=0===a?1.02:Math.max(1-.04*a,.7),c=this.items[e];c.style.transform=`translateX(${i}px) translateZ(${o}px) scale(${s}) translate(-50%,-50%)`,c.style.zIndex=0===a?3e3:String(100-Math.min(a,20)),c.style.opacity=a>4?"0":String(Math.max(1-.18*a,.18)),c.style.pointerEvents=0===a?"auto":"none",c.classList.toggle("active",0===a)}this.dotsWrap&&Array.from(this.dotsWrap.children).forEach((e,t)=>e.classList.toggle("active",t===this.idx)),t&&this._resetAuto()}next(){this.goTo(this.idx+1)}prev(){this.goTo(this.idx-1)}start(){this.timer||(this.timer=setInterval(()=>this.next(),this.interval))}stop(){this.timer&&(clearInterval(this.timer),this.timer=null)}_resetAuto(){this.stop(),this.auto&&this.start()}}document.querySelectorAll(".carousel").forEach(e=>new i(e))});